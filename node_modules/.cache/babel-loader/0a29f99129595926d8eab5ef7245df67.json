{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\digital-form-oms-tccm\\\\react\\\\src\\\\pages\\\\AddSurvey\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport api from '../../services/api';\nimport ReactDOM from 'react-dom';\nimport { TextField, Button, InputLabel, FormLabel, Select, CircularProgress } from '@material-ui/core';\nimport { Add, Edit } from '@material-ui/icons';\nimport './styles.css';\nimport { connect } from 'react-redux';\nconst styles = {\n  Button: {\n    margin: 24,\n    marginBottom: 0\n  }\n};\n\nfunction AddSurvey({\n  user\n}) {\n  const history = useHistory(); //console.log(\"history addsurvey\", history);\n\n  const location = useLocation(); //console.log(\"history addsurvey\", location);\n\n  const [formError, setFormError] = useState('');\n  const [survey, setSurvey] = useState('');\n  const [creationDate, setCreationDate] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  function convertToDate(somedate) {\n    return String(somedate.getDate() + \"/\" + (somedate.getMonth() + 1) + \"/\" + somedate.getFullYear() + \" \" + somedate.getHours() + \":\" + somedate.getMinutes() + \":\" + somedate.getSeconds());\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault(); //setLoading(true);\n\n    const request = {\n      description: survey,\n      version: \"0.0\",\n      questionnaireStatus: \"1\",\n      creationDate: {\n        creationDate\n      },\n      lastModification: {\n        creationDate\n      }\n    };\n    console.log(\"request\", request);\n    /* const response = await api.post('/insertMedicalRecord', {\r\n         userid: user[location.state.hospitalIndex].userid,\r\n         groupRoleid: user[location.state.hospitalIndex].grouproleid,\r\n         hospitalUnitid: user[location.state.hospitalIndex].hospitalunitid,\r\n         medicalRecord: prontuario\r\n     }).catch( function (error) {\r\n         setLoading(false);\r\n         console.log(error)\r\n         if(error.response.data.Message) {\r\n             setError(error.response.data.Message);\r\n         } else {\r\n             setError(error.response.data.msgRetorno);\r\n         }\r\n     });\r\n       if(response) {\r\n         setLoading(false);\r\n         setSuccess(response.data.msgRetorno);\r\n     }*/\n  }\n\n  function handleChange(e) {\n    setError('');\n    console.log(user);\n    console.log(\"Location pesq\", location);\n    setSurvey(e.target.value);\n    console.log(survey);\n    setCreationDate(String(convertToDate(new Date()))); //setCreationDate(convertToDate(new Date()))\n    //console.log(\"Now\", convertToDate(new Date()))\n\n    /*const request = {\r\n        description: survey,\r\n        version: \"0.0\",\r\n        questionnaireStatus: \"1\",\r\n        creationDate: {creationDate},\r\n        lastModification: {creationDate}\r\n    }\r\n    console.log(\"request\", request);*/\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"Adicione nova pesquisa\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"module\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formGroup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }, \"(Vers\\xE3o 0.0) Nome da sua vers\\xE3o: \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 83\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    name: \"survey\",\n    label: \"Descri\\xE7\\xE3o\",\n    onChange: handleChange,\n    value: survey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit-prontuario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, error), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, success), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    style: styles.Button,\n    variant: \"contained\",\n    type: \"submit\",\n    color: \"primary\",\n    disabled: !survey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, !loading && 'Registrar nova pesquisa', loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  })))))));\n}\n\nexport default connect(state => ({\n  user: state.user\n}))(AddSurvey);","map":{"version":3,"sources":["D:/xampp/htdocs/digital-form-oms-tccm/react/src/pages/AddSurvey/index.js"],"names":["React","useState","useEffect","useHistory","useLocation","api","ReactDOM","TextField","Button","InputLabel","FormLabel","Select","CircularProgress","Add","Edit","connect","styles","margin","marginBottom","AddSurvey","user","history","location","formError","setFormError","survey","setSurvey","creationDate","setCreationDate","loading","setLoading","error","setError","success","setSuccess","convertToDate","somedate","String","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","handleSubmit","e","preventDefault","request","description","version","questionnaireStatus","lastModification","console","log","handleChange","target","value","Date","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport api from '../../services/api';\r\nimport ReactDOM from 'react-dom';\r\nimport { TextField, Button, InputLabel, FormLabel, Select, CircularProgress } from '@material-ui/core';\r\nimport { Add, Edit } from '@material-ui/icons';\r\nimport './styles.css';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nconst styles = {\r\n    Button: {\r\n      margin: 24,\r\n      marginBottom: 0\r\n    }\r\n};\r\n\r\nfunction AddSurvey({user}) {\r\n\r\n    const history = useHistory();\r\n\r\n    //console.log(\"history addsurvey\", history);\r\n\r\n    const location = useLocation();\r\n\r\n    //console.log(\"history addsurvey\", location);\r\n\r\n    const [formError, setFormError] = useState('')\r\n\r\n    const [survey, setSurvey] = useState('');\r\n\r\n    const [creationDate, setCreationDate] = useState('');\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    function convertToDate(somedate){\r\n        return String(somedate.getDate()+\r\n              \"/\"+(somedate.getMonth()+1)+\r\n              \"/\"+somedate.getFullYear()+\r\n              \" \"+somedate.getHours()+\r\n              \":\"+somedate.getMinutes()+\r\n              \":\"+somedate.getSeconds());\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        //setLoading(true);\r\n       \r\n       const request = {\r\n            description: survey,\r\n            version: \"0.0\",\r\n            questionnaireStatus: \"1\",\r\n            creationDate: {creationDate},\r\n            lastModification: {creationDate}\r\n        }\r\n        console.log(\"request\", request);\r\n       /* const response = await api.post('/insertMedicalRecord', {\r\n            userid: user[location.state.hospitalIndex].userid,\r\n            groupRoleid: user[location.state.hospitalIndex].grouproleid,\r\n            hospitalUnitid: user[location.state.hospitalIndex].hospitalunitid,\r\n            medicalRecord: prontuario\r\n        }).catch( function (error) {\r\n            setLoading(false);\r\n            console.log(error)\r\n            if(error.response.data.Message) {\r\n                setError(error.response.data.Message);\r\n            } else {\r\n                setError(error.response.data.msgRetorno);\r\n            }\r\n        });\r\n\r\n        if(response) {\r\n            setLoading(false);\r\n            setSuccess(response.data.msgRetorno);\r\n        }*/\r\n    }\r\n\r\n    function handleChange(e) {\r\n        setError('');\r\n        console.log(user)\r\n        console.log(\"Location pesq\", location)\r\n        setSurvey(e.target.value)\r\n        console.log(survey);\r\n        setCreationDate(String(convertToDate(new Date())))\r\n        //setCreationDate(convertToDate(new Date()))\r\n        //console.log(\"Now\", convertToDate(new Date()))\r\n        /*const request = {\r\n            description: survey,\r\n            version: \"0.0\",\r\n            questionnaireStatus: \"1\",\r\n            creationDate: {creationDate},\r\n            lastModification: {creationDate}\r\n        }\r\n        console.log(\"request\", request);*/\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <main className=\"container\">\r\n                <div>\r\n                    <h2>Adicione nova pesquisa</h2>\r\n                </div>\r\n                <div>\r\n                 <form className=\"module\" onSubmit={handleSubmit}>\r\n                    <div className=\"formGroup\">\r\n                        <InputLabel>(Versão 0.0) Nome da sua versão: </InputLabel><br/>\r\n                        <TextField name=\"survey\" label=\"Descrição\" onChange={handleChange} value={survey}/>\r\n                    </div>\r\n                    <div className=\"submit-prontuario\">\r\n                        <span className=\"error\">{ error }</span>\r\n                        <span className=\"success\">{ success }</span>\r\n                        <br/>\r\n                        <Button style={styles.Button} variant=\"contained\" type=\"submit\" color=\"primary\" disabled={!survey}>\r\n                            { !loading &&\r\n                                'Registrar nova pesquisa'\r\n                            }\r\n                            { loading &&\r\n                                <CircularProgress color=\"white\"/>\r\n                            }\r\n                        </Button>\r\n                    </div>\r\n                 </form>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default connect(state => ({ user: state.user }))(AddSurvey);"]},"metadata":{},"sourceType":"module"}