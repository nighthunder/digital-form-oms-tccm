{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\digital-form-oms-tccm\\\\react\\\\src\\\\pages\\\\AddModule\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport api from '../../services/api';\nimport ReactDOM from 'react-dom';\nimport { TextField, Button, InputLabel, FormLabel, Select, CircularProgress } from '@material-ui/core';\nimport { Add, Edit } from '@material-ui/icons';\nimport './styles.css';\nimport { connect } from 'react-redux';\nconst styles = {\n  Button: {\n    margin: 24,\n    marginBottom: 0\n  }\n};\n\nfunction AddModule({\n  user\n}) {\n  const history = useHistory();\n  const location = useLocation();\n  const [formError, setFormError] = useState('');\n  const [module, setModule] = useState([]);\n  const [selectModule, setSelectModule] = useState('');\n  const [creationDate, setCreationDate] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  function convertToDate(somedate) {\n    return String(somedate.getFullYear() + \"-\" + (somedate.getMonth() + 1) + \"-\" + somedate.getDate() + \" \" + somedate.getHours() + \":\" + somedate.getMinutes() + \":\" + somedate.getSeconds());\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    const param = {\n      userid: user[0].userid,\n      grouproleid: user[0].grouproleid,\n      hospitalunitid: user[0].hospitalunitid,\n      questionnaireID: location.state.questionnaireID,\n      description: selectModule,\n      moduleStatusID: \"2\",\n      // New\n      lastModification: creationDate,\n      creationDate: creationDate\n    };\n    console.log(\"request\", param);\n    const response = await api.post('/module/', param).catch(function (error) {\n      setLoading(false);\n      console.log(error);\n\n      if (error.response.data.Message) {\n        setError(error.response.data.Message);\n      } else {\n        setError(error.response.data.msgRetorno);\n      }\n    });\n\n    if (response) {\n      setLoading(false);\n      setSuccess(response.data.msgRetorno);\n      history.push(\"show-survey/\", location.state.questionnaireID);\n    }\n  }\n\n  useEffect(() => {\n    async function getModules() {\n      const response = await api.get('/modules/1').catch(function (error) {\n        console.log(error);\n\n        if (error.response.data.Message) {\n          setError(error.response.data.Message);\n        } else {\n          setError(error.response.data.msgRetorno);\n        }\n      });\n\n      if (response) {\n        setModule(response.data);\n        console.log(\"Módulos description\", module);\n      }\n    }\n\n    getModules();\n  }, []);\n\n  function handleChange(e) {\n    setError(''); //console.log(user)\n    //setModule(e.target.value);\n    //console.log(module);\n\n    setSelectModule(e.target.value);\n    console.log(\"Valor selecionado\", selectModule);\n    setCreationDate(convertToDate(new Date()));\n  }\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, \" Adicione um novo formul\\xE1rio na pesquisa:\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, location.state.description), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"survey-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"Vers\\xE3o: \", location.state.version), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 48\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"padding-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, \"Status: \", location.state.questionnaireStatus), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 83\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"Data de cria\\xE7\\xE3o: \", location.state.creationDate), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 62\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"padding-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"\\xDAltima modifica\\xE7\\xE3o: \", location.state.lastModification), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 92\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"module\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formGroup formGroup1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"Selecione o tipo do novo formul\\xE1rio CRF:\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 90\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"selectModule\",\n    className: \"sel1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, module.map(q => /*#__PURE__*/React.createElement(\"option\", {\n    key: q.crfFormsID,\n    value: q.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 41\n    }\n  }, q.description)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit-prontuario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, error), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, success), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    style: styles.Button,\n    variant: \"contained\",\n    type: \"submit\",\n    color: \"primary\",\n    disabled: !module,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, !loading && 'Registrar novo formulário', loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  })))));\n}\n\nexport default connect(state => ({\n  user: state.user\n}))(AddModule);","map":{"version":3,"sources":["D:/xampp/htdocs/digital-form-oms-tccm/react/src/pages/AddModule/index.js"],"names":["React","useState","useEffect","useHistory","useLocation","api","ReactDOM","TextField","Button","InputLabel","FormLabel","Select","CircularProgress","Add","Edit","connect","styles","margin","marginBottom","AddModule","user","history","location","formError","setFormError","module","setModule","selectModule","setSelectModule","creationDate","setCreationDate","loading","setLoading","error","setError","success","setSuccess","convertToDate","somedate","String","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","handleSubmit","e","preventDefault","param","userid","grouproleid","hospitalunitid","questionnaireID","state","description","moduleStatusID","lastModification","console","log","response","post","catch","data","Message","msgRetorno","push","getModules","get","handleChange","target","value","Date","version","questionnaireStatus","map","q","crfFormsID"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport api from '../../services/api';\r\nimport ReactDOM from 'react-dom';\r\nimport { TextField, Button, InputLabel, FormLabel, Select, CircularProgress } from '@material-ui/core';\r\nimport { Add, Edit } from '@material-ui/icons';\r\nimport './styles.css';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nconst styles = {\r\n    Button: {\r\n      margin: 24,\r\n      marginBottom: 0\r\n    }\r\n};\r\n\r\nfunction AddModule({user}) {\r\n\r\n    const history = useHistory();\r\n\r\n    const location = useLocation();\r\n\r\n    const [formError, setFormError] = useState('')\r\n\r\n    const [module, setModule] = useState([]);\r\n\r\n    const [selectModule, setSelectModule] = useState('');\r\n\r\n    const [creationDate, setCreationDate] = useState('');\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    function convertToDate(somedate){\r\n        return String(somedate.getFullYear()+\r\n              \"-\"+(somedate.getMonth()+1)+\r\n              \"-\"+somedate.getDate()+\r\n              \" \"+somedate.getHours()+\r\n              \":\"+somedate.getMinutes()+\r\n              \":\"+somedate.getSeconds());\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n       \r\n      const param = {\r\n            userid : user[0].userid,    \r\n            grouproleid : user[0].grouproleid,    \r\n            hospitalunitid : user[0].hospitalunitid,    \r\n            questionnaireID: location.state.questionnaireID,\r\n            description: selectModule,\r\n            moduleStatusID: \"2\", // New\r\n            lastModification: creationDate,\r\n            creationDate: creationDate\r\n       }\r\n       console.log(\"request\", param);\r\n       \r\n       const response = await api.post('/module/', param).catch( function (error) {\r\n            setLoading(false);\r\n            console.log(error)\r\n            if(error.response.data.Message) {\r\n                setError(error.response.data.Message);\r\n            } else {\r\n                setError(error.response.data.msgRetorno);\r\n            }\r\n        });\r\n\r\n       if(response) {\r\n            setLoading(false);\r\n            setSuccess(response.data.msgRetorno);\r\n            history.push(\"show-survey/\", location.state.questionnaireID);\r\n       } \r\n    }\r\n\r\n    useEffect(() => {\r\n       async function getModules(){\r\n           const response = await api.get('/modules/1').catch( function (error) {\r\n                console.log(error)\r\n                if(error.response.data.Message) {\r\n                    setError(error.response.data.Message);\r\n                } else {\r\n                    setError(error.response.data.msgRetorno);\r\n                }\r\n            });\r\n\r\n           if(response) {\r\n                setModule(response.data);\r\n                console.log(\"Módulos description\", module);\r\n            }\r\n        }\r\n        getModules();\r\n    }, [])\r\n\r\n    function handleChange(e) {\r\n        setError('');\r\n        //console.log(user)\r\n        //setModule(e.target.value);\r\n        //console.log(module);\r\n        setSelectModule(e.target.value);\r\n        console.log(\"Valor selecionado\", selectModule);\r\n        setCreationDate(convertToDate(new Date()));\r\n    }\r\n\r\n    return (\r\n            <main className=\"container\">\r\n                <p className=\"subtitle\"> Adicione um novo formulário na pesquisa:</p>\r\n                <h2>{location.state.description}</h2>\r\n\t\t\t    <div className=\"survey-details\">\r\n\t\t\t\t    <p>Versão: {location.state.version}</p><br/>\r\n\t\t\t\t    <p className=\"padding-10\">Status: {location.state.questionnaireStatus}</p><br/>\r\n\t\t\t\t    <p>Data de criação: {location.state.creationDate}</p><br/>\r\n\t\t\t\t    <p className=\"padding-10\">Última modificação: {location.state.lastModification}</p><br/>\r\n\t\t\t    </div>\r\n                <form className=\"module\" onSubmit={handleSubmit}>\r\n                    <div className=\"formGroup formGroup1\">\r\n                        <InputLabel>Selecione o tipo do novo formulário CRF:</InputLabel><br/>\r\n                        <select name=\"selectModule\" className=\"sel1\" onChange={handleChange}>\r\n                           {\r\n                                module.map(q => ( \r\n                                        <option key={q.crfFormsID} value={q.description}>{q.description}</option>\r\n                                 ))\r\n                             }\r\n                        </select>\r\n                    </div>\r\n                    <div className=\"submit-prontuario\">\r\n                        <span className=\"error\">{ error }</span>\r\n                        <span className=\"success\">{ success }</span>\r\n                        <br/>\r\n                        <Button style={styles.Button} variant=\"contained\" type=\"submit\" color=\"primary\" disabled={!module}>\r\n                            { !loading &&\r\n                                'Registrar novo formulário'\r\n                            }\r\n                            { loading &&\r\n                                <CircularProgress color=\"white\"/>\r\n                            }\r\n                        </Button>\r\n                    </div>\r\n                 </form>\r\n            </main>\r\n    );\r\n}\r\n\r\nexport default connect(state => ({ user: state.user }))(AddModule);"]},"metadata":{},"sourceType":"module"}