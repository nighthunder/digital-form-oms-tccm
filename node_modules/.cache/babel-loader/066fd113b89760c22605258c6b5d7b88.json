{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\digital-form-oms-tccm\\\\react\\\\src\\\\pages\\\\ShowSurvey\\\\index.js\";\n// Detalhamento de uma pesquisa\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport api from '../../services/api';\nimport { Button, TextField, CircularProgress, Select, useMediaQuery, useTheme } from '@material-ui/core';\nimport { Add, Edit } from '@material-ui/icons';\nimport './styles.css';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport { connect } from 'react-redux';\n\nfunction ShowSurvey(_ref) {\n  let {\n    user\n  } = _ref;\n  const location = useLocation();\n  console.log(\"LOCATION\", location);\n  const history = useHistory();\n  const [modules, setModules] = useState([]);\n  const [moduleID, setModuleID] = useState(''); // ID do módulo clicado\n\n  const [popupTitle, setPopupTitle] = useState('');\n  const [popupBodyText, setPopupBodyText] = useState('');\n  useEffect(() => {\n    async function loadModules() {\n      const response = await api.get('/modules/' + location.state.questionnaireID);\n      setModules(response.data); //console.log(\"Resposta2\", user);\n      //console.log(\"Resposta4\", modules);\n      //console.log(\"Resposta3\", location.state);\n    }\n\n    loadModules();\n  }, []);\n\n  function getPtBrDate(somedate) {\n    //var today = new Date();\n    var dd = String(somedate.getDate()).padStart(2, '0');\n    var mm = String(somedate.getMonth() + 1).padStart(2, '0');\n    var yyyy = somedate.getFullYear();\n    return dd + '/' + mm + '/' + yyyy;\n  }\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = value => {\n    setOpen(false);\n    console.log(\"Descrição\" + value);\n    setModuleID(value);\n    {\n      location.state.questionnaireStatus === \"Publicado\" && setPopupTitle(\"Este questionário está em uso.\");\n      setPopupBodyText(\"Tem certeza de que deseja alterar um formulário deprecado?\");\n      setOpen(true);\n    }\n    {\n      location.state.questionnaireStatus === \"Deprecado\" && setPopupTitle(\"Este questionário foi deprecado.\");\n      setPopupBodyText(\"Apenas edições básicas são permitidas em formulários em uso.\");\n      setOpen(true);\n    }\n    {\n      location.state.questionnaireStatus === \"Novo\" && history.push('/edit-unpublished-form');\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleOpenEditPublishedForm = () => {\n    console.log(moduleID);\n    history.push('/edit-published-form', {\n      moduleID: moduleID,\n      hospitalIndex: user[0].hospitalunitid\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }\n  }, location.state.description), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"survey-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, \"Vers\\xE3o: \", location.state.version), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 44\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"padding-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, \"Status: \", location.state.questionnaireStatus), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 79\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, \"Data de cria\\xE7\\xE3o: \", location.state.creationDate), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 58\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"padding-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, \"\\xDAltima modifica\\xE7\\xE3o: \", location.state.lastModification), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 88\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modules-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 8\n    }\n  }, \"M\\xD3DULO\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 8\n    }\n  }, \"STATUS\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 8\n    }\n  }, \"CRIADO EM\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 8\n    }\n  }, \"MODIFICADO EM\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  }, modules.map(q => /*#__PURE__*/React.createElement(\"tr\", {\n    value: q.description,\n    key: q.questionnaireID,\n    \"data-key\": q.description,\n    onClick: () => handleClickOpen(q.description),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 41\n    }\n  }, q.description), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 41\n    }\n  }, q.crfFormsStatus), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 41\n    }\n  }, getPtBrDate(new Date(q.creationDate))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 41\n    }\n  }, getPtBrDate(new Date(q.lastModification)))))), /*#__PURE__*/React.createElement(Dialog, {\n    key: location.state.questionnaireStatus,\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, popupTitle), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    id: \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 23\n    }\n  }, location.state.questionnaireStatus === \"Publicado\" && \"Apenas edições básicas são permitidas em formulários em uso.\", location.state.questionnaireStatus === \"Deprecado\" && \"Tem certeza de que deseja alterar um formulário deprecado?\")), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 23\n    }\n  }, \"N\\xE3o concordo\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleOpenEditPublishedForm,\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }, \"Concordo\"))))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    className: \"add-module\",\n    onClick: () => {\n      history.push('/add-module', {\n        questionnaireID: location.state.questionnaireID,\n        description: location.state.description,\n        version: location.state.version,\n        questionnaireStatus: location.state.questionnarieStatus,\n        lastModification: location.state.lastModification,\n        creationDate: location.state.creationDate\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Add, {\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }), \"Adicionar novo formul\\xE1rio de m\\xF3dulo +\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    className: \"add-module publish\",\n    onClick: () => {\n      history.push('/survey-publish');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Add, {\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }), \"Publicar pesquisa\")));\n}\n\nexport default connect(state => ({\n  user: state.user\n}))(ShowSurvey);","map":{"version":3,"sources":["D:/xampp/htdocs/digital-form-oms-tccm/react/src/pages/ShowSurvey/index.js"],"names":["React","useState","useEffect","useHistory","useLocation","api","Button","TextField","CircularProgress","Select","useMediaQuery","useTheme","Add","Edit","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","connect","ShowSurvey","user","location","console","log","history","modules","setModules","moduleID","setModuleID","popupTitle","setPopupTitle","popupBodyText","setPopupBodyText","loadModules","response","get","state","questionnaireID","data","getPtBrDate","somedate","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","open","setOpen","handleClickOpen","value","questionnaireStatus","push","handleClose","handleOpenEditPublishedForm","hospitalIndex","hospitalunitid","description","version","creationDate","lastModification","map","q","crfFormsStatus","Date","questionnarieStatus"],"mappings":"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","sourcesContent":["// Detalhamento de uma pesquisa\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport api from '../../services/api';\r\nimport { Button, TextField, CircularProgress, Select, useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { Add, Edit } from '@material-ui/icons';\r\nimport './styles.css';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nfunction ShowSurvey({user}) {\r\n\r\n\tconst location = useLocation();\r\n    console.log(\"LOCATION\", location);\r\n\tconst history = useHistory();\r\n\t\r\n\tconst [modules, setModules] = useState([]);\r\n    const [moduleID, setModuleID] = useState(''); // ID do módulo clicado\r\n\r\n    const [popupTitle, setPopupTitle] = useState('');\r\n    const [popupBodyText, setPopupBodyText] = useState('');\r\n\r\n\tuseEffect(() => {\r\n        async function loadModules() {\r\n            const response = await api.get('/modules/'+location.state.questionnaireID);\r\n            setModules(response.data);\r\n\t\t\t//console.log(\"Resposta2\", user);\r\n\t\t\t//console.log(\"Resposta4\", modules);\r\n\t\t\t//console.log(\"Resposta3\", location.state);\r\n        }                                                                                                                                                                                                       \r\n        loadModules();\r\n    }, [])\r\n\r\n\tfunction getPtBrDate(somedate) {\r\n        //var today = new Date();\r\n        var dd = String(somedate.getDate()).padStart(2, '0');\r\n        var mm = String(somedate.getMonth() + 1).padStart(2, '0');\r\n        var yyyy = somedate.getFullYear();\r\n        return dd + '/' + mm + '/' + yyyy;\r\n    }\r\n\r\n\tconst [open, setOpen] = React.useState(false);\r\n\r\n    const handleClickOpen = (value) => {\r\n        setOpen(false);\r\n        console.log(\"Descrição\"+ value);\r\n        setModuleID(value);\r\n        {location.state.questionnaireStatus === \"Publicado\" &&\r\n            setPopupTitle(\"Este questionário está em uso.\");\r\n            setPopupBodyText(\"Tem certeza de que deseja alterar um formulário deprecado?\");\r\n            setOpen(true);\r\n        }\r\n        { location.state.questionnaireStatus === \"Deprecado\" &&  \r\n            setPopupTitle(\"Este questionário foi deprecado.\");\r\n            setPopupBodyText(\"Apenas edições básicas são permitidas em formulários em uso.\");\r\n            setOpen(true);\r\n        }\r\n        {location.state.questionnaireStatus === \"Novo\" &&  history.push('/edit-unpublished-form');}\r\n    };\r\n\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleOpenEditPublishedForm = () => {\r\n       console.log(moduleID);\r\n       history.push('/edit-published-form', {\r\n            moduleID: moduleID,\r\n            hospitalIndex: user[0].hospitalunitid});\r\n    };\r\n\r\n\treturn (\r\n\r\n\t  <main className=\"container\">\r\n\t    <div className=\"module\">\r\n\t\t\t<h2>{location.state.description}</h2>\r\n\t\t\t<div className=\"survey-details\">\r\n\t\t\t\t<p>Versão: {location.state.version}</p><br/>\r\n\t\t\t\t<p className=\"padding-10\">Status: {location.state.questionnaireStatus}</p><br/>\r\n\t\t\t\t<p>Data de criação: {location.state.creationDate}</p><br/>\r\n\t\t\t\t<p className=\"padding-10\">Última modificação: {location.state.lastModification}</p><br/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"modules-list\">\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>MÓDULO</th>\r\n\t\t\t\t\t\t\t<th>STATUS</th>\r\n\t\t\t\t\t\t\t<th>CRIADO EM</th> \r\n\t\t\t\t\t\t\t<th>MODIFICADO EM</th> \r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t{\r\n                              modules.map(q => ( \r\n                                    <tr value={q.description} key={q.questionnaireID} data-key={q.description} onClick={() => handleClickOpen(q.description)}>\r\n                                        <td>{q.description}</td>\r\n                                        <td>{q.crfFormsStatus}</td>\r\n                                        <td>{getPtBrDate(new Date(q.creationDate))}</td> \r\n                                        <td>{getPtBrDate(new Date(q.lastModification))}</td> \r\n                                    </tr>\r\n                               ))\r\n                     }\r\n\t\t\t\t\t</tbody>\r\n                  <Dialog key={location.state.questionnaireStatus}\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                  >\r\n                    <DialogTitle id=\"alert-dialog-title\">\r\n                      {popupTitle}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText id=\"alert-dialog-description\">\r\n                      { location.state.questionnaireStatus === \"Publicado\" &&\r\n                      \"Apenas edições básicas são permitidas em formulários em uso.\"}\r\n                       { location.state.questionnaireStatus === \"Deprecado\" &&\r\n                      \"Tem certeza de que deseja alterar um formulário deprecado?\"}\r\n                      </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button onClick={handleClose}>Não concordo</Button>\r\n                      <Button onClick={handleOpenEditPublishedForm} autoFocus>\r\n                        Concordo\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t <Button variant=\"outlined\" color=\"primary\" className=\"add-module\" onClick={ () => {\r\n\t\t\t\thistory.push('/add-module',  \r\n\t\t\t\t{questionnaireID: location.state.questionnaireID, \r\n\t\t\t\t\t\t\t\t  description : location.state.description,\r\n                                  version : location.state.version,\r\n                                  questionnaireStatus : location.state.questionnarieStatus,\r\n                                  lastModification: location.state.lastModification,\r\n                                  creationDate: location.state.creationDate\r\n                })\r\n\t\t\t }}>\r\n\t\t\t\t<Add color=\"primary\" />\r\n\t\t\t\tAdicionar novo formulário de módulo +\r\n\t\t\t </Button><br/>\r\n\t\t\t  <Button variant=\"outlined\" color=\"primary\" className=\"add-module publish\" onClick={ () => {\r\n\t\t\t\thistory.push('/survey-publish')\r\n\t\t\t }}>\r\n\t\t\t\t<Add color=\"primary\" />\r\n\t\t\t\tPublicar pesquisa\r\n\t\t\t </Button>\r\n\t\t </div>\r\n      </main>\r\n\r\n\t);\r\n\r\n}\r\n\r\nexport default connect(state => ({ user: state.user }))(ShowSurvey);"]},"metadata":{},"sourceType":"module"}